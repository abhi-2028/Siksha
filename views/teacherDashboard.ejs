<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f9fafc; font-family: 'Segoe UI', sans-serif; }
    .dashboard-header { background: linear-gradient(90deg, #2563eb, #f97316); color: white; border-radius: 15px; padding: 25px; margin-bottom: 20px; }
    .stat-card { background: #fff; border-radius: 15px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center; }
    .student-card { background: #fff; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
    .student-info { display: flex; align-items: center; gap: 10px; }
    .student-avatar { background: #2563eb; color: #fff; font-weight: bold; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
    .lesson-card { background: #fff; border-radius: 12px; padding: 15px; margin-bottom: 10px; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
    .progress { height: 6px; border-radius: 4px; }
    .footer-card { background: linear-gradient(90deg, #10b981, #34d399); border-radius: 15px; padding: 20px; text-align: center; color: white; font-weight: bold; }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">üìò ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ Siksha</a>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#">Students</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Lessons</a></li>
        <li class="nav-item"><a class="nav-link active" href="#">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Profile</a></li>
      </ul>
    </div>
  </nav>

  <div class="container mt-4">
    <!-- Header -->
    <div class="dashboard-header d-flex justify-content-between align-items-center">
      <div>
        <h2>Teacher Dashboard</h2>
        <p>Monitor your students' progress and manage lessons</p>
      </div>
      <div>
        <button class="btn btn-light me-2">üìÖ Schedule</button>
        <button class="btn btn-warning">‚ûï New Lesson</button>
      </div>
    </div>

    <!-- Stats -->
    <div class="row mb-4">
      <div class="col-md-3"><div class="stat-card"><h4><%= stats.totalStudents %></h4><p>Total Students</p></div></div>
      <div class="col-md-3"><div class="stat-card"><h4><%= stats.activeLessons %></h4><p>Active Lessons</p></div></div>
      <div class="col-md-3"><div class="stat-card"><h4><%= stats.completionRate %>%</h4><p>Completion Rate</p></div></div>
      <div class="col-md-3"><div class="stat-card"><h4><%= stats.averageScore %>%</h4><p>Average Score</p></div></div>
    </div>

    <div class="row">
      <!-- Student Progress -->
      <div class="col-lg-6">
        <h5 class="mb-3">Student Progress</h5>

        <% if (students.length === 0) { %>
          <p class="text-muted">No students enrolled yet.</p>
        <% } else { %>
          <% students.forEach(student => { %>
            <div class="student-card">
              <div class="student-info">
                <div class="student-avatar"><%= student.name.split(" ").map(w => w[0]).join("") %></div>
                <div>
                  <strong><%= student.name %></strong><br>
                  <small>Last seen: <%= student.lastSeen %></small>
                </div>
              </div>
              <div style="width:40%">
                <div class="progress mb-1"><div class="progress-bar <%= student.active ? 'bg-primary' : 'bg-warning' %>" style="width:<%= student.progress %>%"></div></div>
                <small><%= student.progress %>% - <%= student.active ? "Active" : "Inactive" %></small>
              </div>
            </div>
          <% }) %>
        <% } %>
      </div>

      <!-- Active Lessons -->
      <div class="col-lg-6">
        <h5 class="mb-3">Active Lessons</h5>

        <% if (lessons.length === 0) { %>
          <p class="text-muted">No lessons uploaded yet.</p>
        <% } else { %>
          <% lessons.forEach(lesson => { %>
            <div class="lesson-card">
              <h6><%= lesson.title %></h6>
              <small><%= lesson.subject %></small>
              <div class="progress my-2"><div class="progress-bar <%= lesson.status === 'draft' ? 'bg-warning' : 'bg-primary' %>" style="width:<%= lesson.completionPercent %>%"></div></div>
              <small>Completion: <%= lesson.completed %>/<%= lesson.total %> | Avg Score: <%= lesson.avgScore %>% | Status: <%= lesson.status %></small>
            </div>
          <% }) %>
        <% } %>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer-card mt-4">
      Class Average: <%= stats.averageScore %>%
    </div>
  </div>
</body>
</html>
